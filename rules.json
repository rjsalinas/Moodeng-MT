{
  "metadata": {
    "version": "1.0",
    "created_date": "2025-08-25",
    "description": "Combined ORTH ruleset for Filipino orthographic normalization."
  },
  "rules": [
    {
      "rule_id": "ORTH_001",
      "legacy_ids": ["SUB_OU_01"],
      "op_type": "substitution",
      "family": "vowel_substitution",
      "paper_rule": "RULE-2 o vs u",
      "description": "Normalize o↔u alternation per modern Filipino usage",
      "pattern": "(?<=\\w)([ou])(?=\\w)",
      "direction": {
        "type": "context_dependent",
        "policy": [
          {"condition": "syllable_open == true", "target": "o"},
          {"condition": "is_loanword AND closed_syllable", "target": "u"},
          {"condition": "proper_name", "target": "preserve"}
        ]
      },
      "scope": "char",
      "canonical_choice": "prefer 'o' in open syllables; 'u' in closed loan syllables",
      "rationale": "High-frequency alternation; follow modern orthography where possible",
      "preconditions": ["lang in [fil,tag]", "not_proper_name"],
      "examples": [{"from":"anu","to":"ano"},{"from":"anu-ano","to":"ano-ano"}],
      "confidence_default": 0.95,
      "variation_index": "high",
      "priority": 90,
      "active": true,
      "deprecated": false,
      "notes": "Requires morphological/syllabification hints for precise application"
    },

    {
      "rule_id": "ORTH_002",
      "legacy_ids": ["SUB_IE_01"],
      "op_type": "substitution",
      "family": "vowel_substitution",
      "paper_rule": "i vs e variants",
      "description": "Prefer 'e' in many Filipinized adaptations but be context-dependent",
      "pattern": "(?<=\\w)([ie])(?=\\w)",
      "direction": {"type":"context_dependent", "policy":[{"condition":"common_variant=='e'","target":"e"},{"condition":"default","target":"preserve"}]},
      "scope": "char",
      "canonical_choice": "prefer 'e' in many common loans/adaptations",
      "preconditions": ["lang in [fil,tag]", "not_proper_name"],
      "examples": [{"from":"kase","to":"kasi"}, {"from": "kame", "to": "kami"}, {"from": "naten", "to": "natin"}],
      "confidence_default": 0.88,
      "variation_index": "high",
      "priority": 80,
      "active": true
    },

    {
      "rule_id": "ORTH_003",
      "legacy_ids": ["SUB_CONS_CK_01"],
      "op_type": "substitution",
      "family": "consonant_substitution",
      "paper_rule": "c vs k / c vs s / ks vs x",
      "description": "Map Spanish-influenced consonants to Filipino-preferred forms (c→k/s, ks→x etc.) context-dependent",
      "pattern": "(?i)c|ch|ks|x",
      "direction": {"type":"context_dependent","policy":[{"condition":"before_vowel_and_native_syllable","target":"k"},{"condition":"before_ei_or_soft_sound","target":"s"},{"condition":"sequence_ks","target":"ks_to_x_or_keep"}]},
      "scope": "substr",
      "canonical_choice": "use k/prefers for phonetic mapping; ch->ts often",
      "preconditions": ["lang in [fil,tag]","not_proper_name"],
      "examples": [{"from":"balcon","to":"balkon"},{"from":"princesa","to":"prinsesa"},{"from":"taksi","to":"taxi"}],
      "confidence_default": 0.9,
      "variation_index": "medium",
      "priority": 78,
      "active": true
    },

    {
      "rule_id": "ORTH_004",
      "legacy_ids": ["SUB_F_P_01"],
      "op_type": "substitution",
      "family": "consonant_substitution",
      "paper_rule": "f vs p",
      "description": "Prefer 'p' for older loans and native substitutions; keep 'f' in international names and modern borrowings",
      "pattern": "f",
      "direction": {"type":"context_dependent","policy":[{"condition":"is_international_name","target":"preserve"},{"condition":"is_nativeized_loan","target":"p"}]},
      "scope": "char",
      "canonical_choice": "prefer p in common Filipinized forms (pilipino vs filipino is nuanced)",
      "preconditions": ["lang in [fil,tag]","not_proper_name"],
      "examples": [{"from":"filosopo","to":"pilosopo"}],
      "confidence_default": 0.85,
      "variation_index": "medium",
      "priority": 70,
      "active": true
    },

    {
      "rule_id": "ORTH_005",
      "legacy_ids": ["HYPO_REDUP_01","SUB_DASH_01"],
      "op_type": "insertion",
      "family": "reduplication_handling",
      "paper_rule": "dash vs no dash / reduplication",
      "description": "Hyphenate full reduplication and mark affix boundaries when morphological analyzer confirms reduplication",
      "pattern": "\\b(\\w+)\\s+\\1\\b",
      "direction": "space->hyphen",
      "scope": "substr",
      "canonical_choice": "hyphenated_reduplication",
      "rationale": "Orthography and readability; aligns with dictionary conventions",
      "preconditions": ["morph.is_reduplication == true","not_proper_name"],
      "examples": [{"from":"araw araw","to":"araw-araw"}],
      "confidence_default": 0.98,
      "variation_index": "high",
      "priority": 96,
      "active": true
    },

    {
      "rule_id": "ORTH_006",
      "legacy_ids": ["DEL_REPEAT_01"],
      "op_type": "deletion",
      "family": "repetition_deletion",
      "description": "Collapse expressive elongation (character repetitions) used in chat/emphasis",
      "pattern": "(.)\\1{2,}",
      "direction": "reduce_repetition",
      "scope": "char",
      "canonical_choice": "single_character",
      "rationale": "Remove emphasis-induced noise while preserving single-character geminates when needed",
      "preconditions": ["not_morphological_reduplication"],
      "examples": [
                    {"from":"akoooo","to":"ako"},
                    {"from":"charrr","to":"char"},
                    {"from":"tamah","to":"tama"},
                    {"from":"maleh","to":"mali"}
                  ],
      "confidence_default": 0.99,
      "variation_index": "low",
      "priority": 98,
      "active": true
    },

    {
      "rule_id": "ORTH_007",
      "legacy_ids": ["SPLIT_DIBA_01"],
      "op_type": "split",
      "family": "split_merge",
      "description": "Expand contracted colloquialisms like d'ba / di'ba to full forms when negation or question context applies",
      "pattern": "\\b(d'ba|di'ba|dba|d'yan|d'yan)\\b",
      "direction": "expand_to_full_form",
      "scope": "token",
      "canonical_choice": "hindi ba or di ba depending on context",
      "preconditions": ["negation_context OR preceding_token_indicates_hindi"],
      "examples": [{"from":"d'ba","to":"hindi ba"}],
      "confidence_default": 0.88,
      "variation_index": "high",
      "priority": 90,
      "active": true
    },

    {
      "rule_id": "ORTH_008",
      "legacy_ids": ["SLANG_MAP_01"],
      "op_type": "substitution",
      "family": "slang_to_standard",
      "description": "Map tokens using slang_lexicon.json (exact token lookup). High-priority lexical normalizations.",
      "pattern": "lexicon:slang_lexicon",
      "direction": "to_standard",
      "scope": "token",
      "canonical_choice": "lexicon mapping",
      "preconditions": ["token_in_lexicon('slang_lexicon')"],
      "examples": [{"from":"tas","to":"tapos"},{"from":"wla","to":"wala"}],
      "confidence_default": 0.95,
      "variation_index": "medium",
      "priority": 92,
      "active": true
    },

    {
      "rule_id": "ORTH_009",
      "legacy_ids": ["CODE_SW_EN_01"],
      "op_type": "tag_or_preserve",
      "family": "code_switch_handling",
      "description": "Detect English tokens in a Filipino context and preserve them while tagging for MT.",
      "pattern": "lang_detect(token)=='en' AND surrounding_lang=='fil'",
      "direction": "preserve_and_tag",
      "scope": "token",
      "canonical_choice": "preserve",
      "preconditions": [],
      "examples": [{"from":"submit","to":"submit","reason":"preserve_english_token"}],
      "confidence_default": 0.97,
      "variation_index": "low",
      "priority": 95,
      "active": true
    },

    {
      "rule_id": "ORTH_010",
      "legacy_ids": ["CLITIC_EXPAND_01"],
      "op_type": "insertion",
      "family": "clitic_spacing",
      "description": "Split/expand common merged clitics (e.g., 'syang' -> 'siya ng'/'siya ang' depending on context) and expand 'k'->'ka' when standalone",
      "pattern": "\\b(k|d|s|p|ny|syang|nyo|nga)\\b",
      "direction": "expand_clitic",
      "scope": "token",
      "canonical_choice": "expanded forms when preconditions met",
      "preconditions": ["lang in [fil,tag]","not_proper_name"],
      "examples": [
                    {"from":"syang","to":"siyang"},
                    {"from":"k","to":"ka"},
                    {"from":"nd","to":"hindi"}, 
                    {"from":"hndi","to":"hindi"},  
                    {"from":"hnd","to":"hindi"},  
                    {"from":"syang","to":"siyang"}
                ],
      "confidence_default": 0.9,
      "variation_index": "high",
      "priority": 89,
      "active": true
    },

    {
      "rule_id": "ORTH_011",
      "legacy_ids": ["MERGE_HYPHEN_01"],
      "op_type": "merge",
      "family": "merge_affixation",
      "description": "Merge 'naka'/'naka' constructs with tokens into hyphenated forms (naka isip -> naka-isip) when affix boundary detected",
      "pattern": "\\b(naka)\\s+(\\w+)\\b",
      "direction": "merge_affix",
      "scope": "substr",
      "canonical_choice": "naka-<word>",
      "preconditions": ["morph.is_affix_boundary == true"],
      "examples": [
                    {"from":"naka isip","to":"naka-isip"},
                    {"from":"nag reply","to":"nag-reply"},  
      {"from":"mag rereply","to":"magre-reply"},  
      {"from":"nakaisip","to":"naka-isip"},  
      {"from":"nagwoworry","to":"nagwo-worry"}
    ],
      "confidence_default": 0.9,
      "variation_index": "medium",
      "priority": 85,
      "active": true
    },

    {
      "rule_id": "ORTH_012",
      "legacy_ids": ["TYPO_COMMON_01"],
      "op_type": "substitution",
      "family": "tokenization_cleanup",
      "description": "Common typos mapping from typos.json",
      "pattern": "lexicon:typos",
      "direction": "to_standard",
      "scope": "token",
      "canonical_choice": "lexicon mapping",
      "preconditions": ["token_in_lexicon('typos')"],
      "examples": [{"from":"charrr","to":"char"},{"from":"hace","to":"have"}],
      "confidence_default": 0.95,
      "variation_index": "low",
      "priority": 86,
      "active": true
    }
  ]
}






